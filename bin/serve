#! /bin/bash

if [ $# -eq 0 ]
  then
    echo "Usage: serve <path to presentation>"
    exit
fi

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
SLIDES=$(python -c 'import os,sys;print(os.path.realpath(sys.argv[1]))' "$1")

cd "${DIR}" || (echo "Severe error" && exit)
./setup

docker run -e "SLIDES=$1" --privileged -p 8000:8000 -p 35729:35729 -it -v "${SLIDES}":/slides/ aquilia "/run"
